<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
<script>
	
	<!-- Ratings List -->
	var ratings = new Array();
	
	<!-- Ajax ---------->
	function check(){
		alert(ratings.length);
		
		<!--- grab ratings ---->
		for(int i=0;i<10;i++){
			var rating_element = document.getElementById(i);
			var datasetID = rating_element.name;
			var rating = rating_element.value;
			if(rating != 'not seen'){
				ratings[ratings.length] = datasetID + '-' + rating;
			}
		}
		
		<!-- send -->
		if(ratings.length >= 10){
			ajax("request=recommendation&test=","x","recommendations"); <!-- enough movies have been rated -->
		}
		else {
			ajax('type=Content&limit=10&request=item','s','movies'); <!-- load more movies to rate -->
		}
	}
	
	function ajax(parameters,str,update){
		var xmlhttp;
		if (str.length==0){ 
  			document.getElementById(update).innerHTML="";
  			return;
  		}
		if (window.XMLHttpRequest){
			// code for IE7+, Firefox, Chrome, Opera, Safari
  			xmlhttp=new XMLHttpRequest();
  		}
		else {
			// code for IE6, IE5
  			xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  		}
		xmlhttp.onreadystatechange=function(){
  			if (xmlhttp.readyState==4 && xmlhttp.status==200){
    			document.getElementById(update).innerHTML=xmlhttp.responseText;
    		}
  		}
	xmlhttp.open("GET","http://localhost:8081/ajax?" + parameters + str, true);
	xmlhttp.send();
}


</script>
</head>
<body onload="ajax('type=Content&limit=10&request=item','s','movies')">

<div id='wrapper' align="center">
<!-- <div id='main' align="left"> -->

<h1>Recommendation Web UI</h3>

<!-- Menu Side ---------->
<div id='menu'>
<h3>User Information</h3>
<input type="hidden" name="method" value="recommendation">

<!--------- User ------------>
<table>
<tr>
<td>Alter</td><td><input name="age" type="text"></td>
</tr><tr>
<td>Geschlecht</td><td>
<select name="gender">
	<option value="F">F</option>
	<option value="M">M</option>
</select></td>
</tr>
</table>
<br>

<!--------- Movies ------------>
<h3>Movie (0 Ratings abgegeben)</h3>
<div id="movies"></div>

<br>

<!--- Fake Form --->
<form action="" method="get" onsubmit="check()"> <!-- Ÿber id(1,2,3,...) -> name und wert -> dann array -> wenn array voll -> recommendation anfordern -->
<input type="submit" value="Senden">
</form>

</div>

<!-- Recommendation Side ---------->
<div id="recommendations">
<h3>Recommendations</h3>
<div id="recommendations">No Recommendations so far..</div>
<!-- </div> -->
</div>
</div>
</body>
</html>
